<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<title>Ø¯Ø±Ø®ÙˆØ§Ø³Øª ÛŒØ¯Ú©â€ŒÚ©Ø´ / Ù…Ú©Ø§Ù†ÛŒÚ© Ø³ÛŒØ§Ø±</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body { font-family:tahoma; background:#f2f2f2; }
form { max-width:420px; margin:30px auto; background:#fff; padding:20px; border-radius:10px; }
input, select, textarea, button { width:100%; margin-top:10px; padding:10px; }
button { background:#28a745; color:#fff; border:none; }
button.loc { background:#007bff; }
</style>
</head>
<body>

<form id="form">
  <h3>Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø®Ø¯Ù…Ø§Øª</h3>

  <select name="service" required>
    <option value="">Ù†ÙˆØ¹ Ø®Ø¯Ù…Ø§Øª</option>
    <option value="ÛŒØ¯Ú©â€ŒÚ©Ø´">ÛŒØ¯Ú©â€ŒÚ©Ø´</option>
    <option value="Ù…Ú©Ø§Ù†ÛŒÚ© Ø³ÛŒØ§Ø±">Ù…Ú©Ø§Ù†ÛŒÚ© Ø³ÛŒØ§Ø±</option>
  </select>

  <input name="name" placeholder="Ù†Ø§Ù…" required>
  <input name="phone" placeholder="Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³" required>
  <input name="plate" placeholder="Ø´Ù…Ø§Ø±Ù‡ Ù¾Ù„Ø§Ú©" required>
  <textarea name="desc" placeholder="ØªÙˆØ¶ÛŒØ­ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)"></textarea>

  <input type="hidden" name="lat" id="lat">
  <input type="hidden" name="lon" id="lon">

  <button type="button" class="loc" onclick="getLocation()">ğŸ“ Ø«Ø¨Øª Ù…ÙˆÙ‚Ø¹ÛŒØª</button>
  <button type="submit">Ø§Ø±Ø³Ø§Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª</button>
</form>

<script>
function getLocation(){
  navigator.geolocation.getCurrentPosition(pos=>{
    lat.value = pos.coords.latitude;
    lon.value = pos.coords.longitude;
    alert("Ù…ÙˆÙ‚Ø¹ÛŒØª Ø«Ø¨Øª Ø´Ø¯ âœ…");
  },()=>alert("GPS ÙØ¹Ø§Ù„ Ù†Ø´Ø¯"));
}

document.getElementById("form").onsubmit = async e => {
  e.preventDefault();
  const data = Object.fromEntries(new FormData(e.target));
  const res = await fetch("/api/submit",{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify(data)
  });
  alert("Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø«Ø¨Øª Ø´Ø¯ âœ…");
};
</script>

</body>
</html>
