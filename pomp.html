<!doctype html>
<html lang="fa" dir="rtl" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>محاسبه سوخت سفر</title>
  <script src="https://cdn.tailwindcss.com/3.4.17"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;500;600;700;800&amp;display=swap" rel="stylesheet">
  <style>
    html, body { height: 100%; margin: 0; padding: 0; }
    * { font-family: 'Vazirmatn', sans-serif; box-sizing: border-box; }

    :root {
      --bg-primary: #0f172a;
      --bg-secondary: #1e293b;
      --text-primary: #e2e8f0;
      --text-secondary: rgba(226, 232, 240, 0.6);
      --accent-primary: #06b6d4;
      --accent-secondary: #f59e0b;
    }

    body {
      background: var(--bg-primary);
      color: var(--text-primary);
      overflow: hidden;
    }

    .app-wrapper {
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      background: linear-gradient(135deg, var(--bg-primary) 0%, #1a2d4d 100%);
      background-attachment: fixed;
      overflow: auto;
    }

    .calc-card {
      background: var(--bg-secondary);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 24px;
      padding: 32px;
      max-width: 420px;
      width: 100%;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
      backdrop-filter: blur(10px);
      position: relative;
      overflow: hidden;
    }

    .calc-card::before {
      content: '';
      position: absolute;
      top: -50%;
      right: -50%;
      width: 200px;
      height: 200px;
      background: radial-gradient(circle, rgba(6, 182, 212, 0.1) 0%, transparent 70%);
      border-radius: 50%;
      pointer-events: none;
    }

    .calc-card::after {
      content: '';
      position: absolute;
      bottom: -100px;
      left: -100px;
      width: 300px;
      height: 300px;
      background: radial-gradient(circle, rgba(245, 158, 11, 0.05) 0%, transparent 70%);
      border-radius: 50%;
      pointer-events: none;
    }

    .card-content {
      position: relative;
      z-index: 1;
    }

    .header {
      text-align: center;
      margin-bottom: 28px;
    }

    .icon {
      font-size: 48px;
      margin-bottom: 12px;
      display: block;
      animation: iconFloat 3s ease-in-out infinite;
    }

    @keyframes iconFloat {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-8px); }
    }

    .title {
      font-size: 26px;
      font-weight: 800;
      background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin: 0;
      line-height: 1.2;
    }

    .subtitle {
      font-size: 13px;
      color: var(--text-secondary);
      margin: 6px 0 0;
    }

    .form-group {
      margin-bottom: 18px;
    }

    .label {
      display: block;
      font-size: 13px;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 8px;
      text-transform: none;
    }

    .input-field {
      width: 100%;
      padding: 12px 16px;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      color: var(--text-primary);
      font-family: 'Vazirmatn', sans-serif;
      font-size: 14px;
      transition: all 0.3s ease;
      direction: ltr;
      text-align: right;
    }

    .input-field:focus {
      outline: none;
      background: rgba(255, 255, 255, 0.08);
      border-color: var(--accent-primary);
      box-shadow: 0 0 0 3px rgba(6, 182, 212, 0.15);
    }

    .input-field::placeholder {
      color: rgba(226, 232, 240, 0.3);
    }

    .button {
      width: 100%;
      padding: 14px 24px;
      background: linear-gradient(135deg, var(--accent-primary), #0891b2);
      border: none;
      border-radius: 12px;
      color: #0f172a;
      font-weight: 700;
      font-size: 15px;
      cursor: pointer;
      font-family: 'Vazirmatn', sans-serif;
      transition: all 0.3s ease;
      margin-top: 8px;
      box-shadow: 0 8px 20px rgba(6, 182, 212, 0.3);
    }

    .button:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 28px rgba(6, 182, 212, 0.4);
    }

    .button:active {
      transform: translateY(0);
    }

    .result-box {
      margin-top: 24px;
      padding: 20px;
      background: rgba(6, 182, 212, 0.08);
      border: 1px solid rgba(6, 182, 212, 0.2);
      border-radius: 16px;
      display: none;
      animation: slideDown 0.4s ease;
    }

    .result-box.active {
      display: block;
    }

    @keyframes slideDown {
      from {
        opacity: 0;
        transform: translateY(-12px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .result-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
      font-size: 14px;
    }

    .result-item:last-child {
      border-bottom: none;
    }

    .result-label {
      color: var(--text-secondary);
      font-weight: 500;
    }

    .result-value {
      color: var(--accent-primary);
      font-weight: 800;
      font-size: 16px;
    }

    .result-value.price {
      background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      font-size: 18px;
    }

    .error {
      color: #ef4444;
      font-size: 13px;
      font-weight: 600;
      padding: 12px;
      background: rgba(239, 68, 68, 0.1);
      border: 1px solid rgba(239, 68, 68, 0.2);
      border-radius: 10px;
      display: none;
      animation: shake 0.4s ease;
    }

    .error.show {
      display: block;
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-4px); }
      75% { transform: translateX(4px); }
    }

    .info-box {
      background: rgba(245, 158, 11, 0.08);
      border: 1px solid rgba(245, 158, 11, 0.2);
      border-radius: 12px;
      padding: 12px;
      font-size: 12px;
      color: var(--text-secondary);
      margin-top: 16px;
      line-height: 1.6;
    }

    /* Scrollbar */
    .app-wrapper::-webkit-scrollbar { width: 6px; }
    .app-wrapper::-webkit-scrollbar-track { background: transparent; }
    .app-wrapper::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.1); border-radius: 3px; }
    .app-wrapper::-webkit-scrollbar-thumb:hover { background: rgba(255, 255, 255, 0.2); }
  </style>
  <style>body { box-sizing: border-box; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full">
  <div class="app-wrapper" id="appWrapper">
   <div class="calc-card">
    <div class="card-content">
     <div class="header"><span class="icon">?</span>
      <h1 id="appTitle" class="title">محاسبه سوخت سفر</h1>
      <p class="subtitle">هزينه و مقدار سوخت مورد نياز را محاسبه کنيد</p>
     </div>
     <form id="calcForm" onsubmit="calculateFuel(event)">
      <div class="form-group"><label class="label" id="distanceLabel">مسافت سفر (کيلومتر):</label> <input type="number" id="distance" class="input-field" placeholder="مثلاً 200" step="0.1" min="0" max="10000" required aria-label="مسافت سفر بر حسب کيلومتر">
      </div>
      <div class="form-group"><label class="label" id="consumptionLabel">مصرف خودرو (ليتر در 100 کيلومتر):</label> <input type="number" id="consumption" class="input-field" placeholder="مثلاً 8" step="0.1" min="0.1" max="100" required aria-label="مصرف سوخت خودرو">
      </div>
      <div class="form-group"><label class="label" id="priceLabel">قيمت سوخت (تومان):</label> <input type="number" id="fuelPrice" class="input-field" placeholder="مثلاً 30000" step="100" min="0" max="500000" required aria-label="قيمت سوخت بر حسب تومان">
      </div><button type="submit" class="button" id="calcButton">محاسبه کن</button>
     </form>
     <div class="error" id="errorMsg" role="alert"></div>
     <div class="result-box" id="resultBox">
      <div class="result-item"><span class="result-label">??? سوخت مورد نياز:</span> <span class="result-value" id="fuelNeededResult">? ليتر</span>
      </div>
      <div class="result-item"><span class="result-label">?? هزينه تقريبي:</span> <span class="result-value price" id="costResult">? تومان</span>
      </div>
      <div class="result-item" id="averageRow" style="display:none;"><span class="result-label">?? ميانگين مصرف:</span> <span class="result-value" id="averageResult">? ليتر/??? کيلومتر</span>
      </div>
     </div>
     <div class="info-box"><strong>?? نکات مهم:</strong><br>
       • مصرف سوخت بسته به رانندگي و شرايط جاده متفاوت است<br>
       • براي سفرهاي بلند مسافتي ??? اضافي لحاظ کنيد<br>
       • هزينه شامل جرائم و عوارض نيست
     </div>
    </div>
   </div>
  </div>
  <script>
// Default config
const defaultConfig = {
  app_title: 'محاسبه سوخت سفر',
  distance_label: 'مسافت سفر (کيلومتر):',
  consumption_label: 'مصرف خودرو (ليتر در 100 کيلومتر):',
  price_label: 'قيمت سوخت (تومان):',
  calc_button_text: 'محاسبه کن',
  bg_primary: '#0f172a',
  bg_secondary: '#1e293b',
  text_primary: '#e2e8f0',
  accent_primary: '#06b6d4',
  accent_secondary: '#f59e0b',
  font_family: 'Vazirmatn',
  font_size: 16
};

// Apply configuration
function applyConfig(config) {
  const bgPrimary = config.bg_primary || defaultConfig.bg_primary;
  const bgSecondary = config.bg_secondary || defaultConfig.bg_secondary;
  const textPrimary = config.text_primary || defaultConfig.text_primary;
  const accentPrimary = config.accent_primary || defaultConfig.accent_primary;
  const accentSecondary = config.accent_secondary || defaultConfig.accent_secondary;
  const fontFamily = config.font_family || defaultConfig.font_family;
  const fontSize = config.font_size || defaultConfig.font_size;

  document.documentElement.style.setProperty('--bg-primary', bgPrimary);
  document.documentElement.style.setProperty('--bg-secondary', bgSecondary);
  document.documentElement.style.setProperty('--text-primary', textPrimary);
  document.documentElement.style.setProperty('--accent-primary', accentPrimary);
  document.documentElement.style.setProperty('--accent-secondary', accentSecondary);

  document.body.style.background = bgPrimary;
  document.body.style.color = textPrimary;

  const fontStack = `${fontFamily}, Vazirmatn, sans-serif`;
  document.body.style.fontFamily = fontStack;

  // Update text content
  const titleEl = document.getElementById('appTitle');
  if (titleEl) {
    titleEl.textContent = config.app_title || defaultConfig.app_title;
    titleEl.style.fontFamily = fontStack;
    titleEl.style.fontSize = `${fontSize * 1.625}px`;
  }

  const distanceLabelEl = document.getElementById('distanceLabel');
  if (distanceLabelEl) {
    distanceLabelEl.textContent = config.distance_label || defaultConfig.distance_label;
  }

  const consumptionLabelEl = document.getElementById('consumptionLabel');
  if (consumptionLabelEl) {
    consumptionLabelEl.textContent = config.consumption_label || defaultConfig.consumption_label;
  }

  const priceLabelEl = document.getElementById('priceLabel');
  if (priceLabelEl) {
    priceLabelEl.textContent = config.price_label || defaultConfig.price_label;
  }

  const buttonEl = document.getElementById('calcButton');
  if (buttonEl) {
    buttonEl.textContent = config.calc_button_text || defaultConfig.calc_button_text;
  }
}

// Initialize SDK
if (window.elementSdk) {
  window.elementSdk.init({
    defaultConfig,
    onConfigChange: async (config) => {
      applyConfig(config);
    },
    mapToCapabilities: (config) => ({
      recolorables: [
        {
          get: () => config.bg_primary || defaultConfig.bg_primary,
          set: (v) => {
            config.bg_primary = v;
            window.elementSdk.setConfig({ bg_primary: v });
          }
        },
        {
          get: () => config.bg_secondary || defaultConfig.bg_secondary,
          set: (v) => {
            config.bg_secondary = v;
            window.elementSdk.setConfig({ bg_secondary: v });
          }
        },
        {
          get: () => config.text_primary || defaultConfig.text_primary,
          set: (v) => {
            config.text_primary = v;
            window.elementSdk.setConfig({ text_primary: v });
          }
        },
        {
          get: () => config.accent_primary || defaultConfig.accent_primary,
          set: (v) => {
            config.accent_primary = v;
            window.elementSdk.setConfig({ accent_primary: v });
          }
        },
        {
          get: () => config.accent_secondary || defaultConfig.accent_secondary,
          set: (v) => {
            config.accent_secondary = v;
            window.elementSdk.setConfig({ accent_secondary: v });
          }
        }
      ],
      borderables: [],
      fontEditable: {
        get: () => config.font_family || defaultConfig.font_family,
        set: (v) => {
          config.font_family = v;
          window.elementSdk.setConfig({ font_family: v });
        }
      },
      fontSizeable: {
        get: () => config.font_size || defaultConfig.font_size,
        set: (v) => {
          config.font_size = v;
          window.elementSdk.setConfig({ font_size: v });
        }
      }
    }),
    mapToEditPanelValues: (config) => new Map([
      ['app_title', config.app_title || defaultConfig.app_title],
      ['distance_label', config.distance_label || defaultConfig.distance_label],
      ['consumption_label', config.consumption_label || defaultConfig.consumption_label],
      ['price_label', config.price_label || defaultConfig.price_label],
      ['calc_button_text', config.calc_button_text || defaultConfig.calc_button_text]
    ])
  });
}

applyConfig(defaultConfig);

// Convert to Persian numerals
function toPersianNum(num) {
  const persianDigits = ['?', '?', '?', '?', '?', '?', '?', '?', '?', '?'];
  return String(num).replace(/\d/g, d => persianDigits[d]);
}

// Format currency
function formatCurrency(num) {
  return toPersianNum(Math.round(num).toLocaleString('en-US'));
}

// Main calculation
function calculateFuel(event) {
  event.preventDefault();

  const distance = parseFloat(document.getElementById('distance').value);
  const consumption = parseFloat(document.getElementById('consumption').value);
  const fuelPrice = parseFloat(document.getElementById('fuelPrice').value);
  const errorEl = document.getElementById('errorMsg');
  const resultBox = document.getElementById('resultBox');

  // Validation
  if (isNaN(distance) || isNaN(consumption) || isNaN(fuelPrice)) {
    errorEl.textContent = '?? لطفاً همه مقادير را درست وارد کنيد';
    errorEl.classList.add('show');
    resultBox.classList.remove('active');
    return;
  }

  if (distance <= 0 || consumption <= 0 || fuelPrice <= 0) {
    errorEl.textContent = '?? تمام مقادير بايد بزرگتر از صفر باشند';
    errorEl.classList.add('show');
    resultBox.classList.remove('active');
    return;
  }

  errorEl.classList.remove('show');

  // Calculations
  const fuelNeeded = (distance * consumption) / 100;
  const totalCost = fuelNeeded * fuelPrice;
  const costPerKm = totalCost / distance;

  // Update result
  document.getElementById('fuelNeededResult').textContent = toPersianNum(fuelNeeded.toFixed(2)) + ' ليتر';
  document.getElementById('costResult').textContent = formatCurrency(totalCost) + ' تومان';
  document.getElementById('averageResult').textContent = toPersianNum(consumption.toFixed(2)) + ' ليتر/??? کيلومتر';

  resultBox.classList.add('active');
}

// Allow Enter key to submit
document.getElementById('calcForm').addEventListener('keypress', function(e) {
  if (e.key === 'Enter') {
    calculateFuel(e);
  }
});
</script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9ce8448147e8d243',t:'MTc3MTE5NDgxMy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>